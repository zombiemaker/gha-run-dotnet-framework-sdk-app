# Manually trigger workflow
name: Test GitHub Action Based On SDK Image
on: workflow_dispatch
jobs:
  test-action:
    name: Test SDK image based action
    runs-on: [windows-2019]
    strategy:
      matrix:
        dotnet-framework-version: ["4.8", "4.7.2", "4.7.1", "4.7", "4.6.2", "3.5", "3.0", "2.5"]
    steps:
      - name: Run msbuild help
        uses: zombiemaker/gha-run-dotnet-framework-sdk-app@v1
        with:
          dotnet-framework-version: ${{ matrix.dotnet-framework-version }}
          command: 'msbuild --help'
      - name: Run dotnet help
        uses: zombiemaker/gha-run-dotnet-framework-sdk-app@v1
        with:
          dotnet-framework-version: ${{ matrix.dotnet-framework-version }}
          command: 'dotnet help'
      - name: Run nuget help
        uses: zombiemaker/gha-run-dotnet-framework-sdk-app@v1
        with:
          dotnet-framework-version: ${{ matrix.dotnet-framework-version }}
          command: 'nuget help'
      - name: Checkout git repo
        uses: actions/checkout@v2
        with:
          repository: ${{ github.repository }}
          ref: 'main'
      - name: Build sample console-app-solution
        uses: zombiemaker/gha-run-dotnet-framework-sdk-app@v1
        with:
          dotnet-framework-version: ${{ matrix.dotnet-framework-version }}
          command: 'dotnet build console-app.sln'
          working-directory: '${{ github.workspace}}\sample-projects\console-app-solution'